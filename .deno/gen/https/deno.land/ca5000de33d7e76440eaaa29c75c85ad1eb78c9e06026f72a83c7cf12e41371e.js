import { DOM as NWAPI } from "./nwsapi-types.ts";
import { DOM as Sizzle } from "./sizzle-types.ts";
let codeGenerationAllowed = null;
export function getSelectorEngine() {
    if (codeGenerationAllowed === null) {
        try {
            new Function("");
            codeGenerationAllowed = true;
        } catch (e) {
            codeGenerationAllowed = false;
        }
    }
    if (codeGenerationAllowed) {
        return NWAPI;
    } else {
        return Sizzle;
    }
}
/**
 * Explicitly disable querySelector/All code generation with the `Function`
 * constructor forcing the Sizzle engine. Enables those APIs on platforms
 * like Deno Deploy that don't allow code generation.
 */ export function disableCodeGeneration() {
    codeGenerationAllowed = false;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh0dHBzOi8vZGVuby5sYW5kL3gvZGVub19kb21AdjAuMS40My9zcmMvZG9tL3NlbGVjdG9ycy9zZWxlY3RvcnMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRE9NIGFzIE5XQVBJIH0gZnJvbSBcIi4vbndzYXBpLXR5cGVzLnRzXCI7XG5pbXBvcnQgeyBET00gYXMgU2l6emxlIH0gZnJvbSBcIi4vc2l6emxlLXR5cGVzLnRzXCI7XG5pbXBvcnQgdHlwZSB7IEVsZW1lbnQgfSBmcm9tIFwiLi4vZWxlbWVudC50c1wiO1xuaW1wb3J0IHR5cGUgeyBEb2N1bWVudCB9IGZyb20gXCIuLi9kb2N1bWVudC50c1wiO1xuXG5leHBvcnQgdHlwZSBTZWxlY3RvciA9IChkb2M6IERvY3VtZW50KSA9PiB7XG4gIGZpcnN0KFxuICAgIHNlbGVjdG9yOiBzdHJpbmcsXG4gICAgY29udGV4dDogRWxlbWVudCB8IERvY3VtZW50LFxuICAgIGNhbGxiYWNrPzogKGVsZW1lbnQ6IEVsZW1lbnQpID0+IHZvaWQsXG4gICk6IEVsZW1lbnQgfCBudWxsO1xuICBtYXRjaChcbiAgICBzZWxlY3Rvcjogc3RyaW5nLFxuICAgIGNvbnRleHQ6IEVsZW1lbnQgfCBEb2N1bWVudCxcbiAgICBjYWxsYmFjaz86IChlbGVtZW50OiBFbGVtZW50KSA9PiB2b2lkLFxuICApOiBib29sZWFuO1xuICBzZWxlY3QoXG4gICAgc2VsZWN0b3I6IHN0cmluZyxcbiAgICBjb250ZXh0OiBFbGVtZW50IHwgRG9jdW1lbnQsXG4gICAgY2FsbGJhY2s/OiAoZWxlbWVudDogRWxlbWVudCkgPT4gdm9pZCxcbiAgKTogRWxlbWVudFtdO1xufTtcbmV4cG9ydCB0eXBlIFNlbGVjdG9yQXBpID0gUmV0dXJuVHlwZTxTZWxlY3Rvcj47XG5cbmxldCBjb2RlR2VuZXJhdGlvbkFsbG93ZWQ6IGJvb2xlYW4gfCBudWxsID0gbnVsbDtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFNlbGVjdG9yRW5naW5lKCk6IFNlbGVjdG9yIHtcbiAgaWYgKGNvZGVHZW5lcmF0aW9uQWxsb3dlZCA9PT0gbnVsbCkge1xuICAgIHRyeSB7XG4gICAgICBuZXcgRnVuY3Rpb24oXCJcIik7XG4gICAgICBjb2RlR2VuZXJhdGlvbkFsbG93ZWQgPSB0cnVlO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvZGVHZW5lcmF0aW9uQWxsb3dlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGlmIChjb2RlR2VuZXJhdGlvbkFsbG93ZWQpIHtcbiAgICByZXR1cm4gTldBUEk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIFNpenpsZTtcbiAgfVxufVxuXG4vKipcbiAqIEV4cGxpY2l0bHkgZGlzYWJsZSBxdWVyeVNlbGVjdG9yL0FsbCBjb2RlIGdlbmVyYXRpb24gd2l0aCB0aGUgYEZ1bmN0aW9uYFxuICogY29uc3RydWN0b3IgZm9yY2luZyB0aGUgU2l6emxlIGVuZ2luZS4gRW5hYmxlcyB0aG9zZSBBUElzIG9uIHBsYXRmb3Jtc1xuICogbGlrZSBEZW5vIERlcGxveSB0aGF0IGRvbid0IGFsbG93IGNvZGUgZ2VuZXJhdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRpc2FibGVDb2RlR2VuZXJhdGlvbigpIHtcbiAgY29kZUdlbmVyYXRpb25BbGxvd2VkID0gZmFsc2U7XG59XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsU0FBUyxPQUFPLEtBQUssUUFBUSxvQkFBb0I7QUFDakQsU0FBUyxPQUFPLE1BQU0sUUFBUSxvQkFBb0I7QUF1QmxELElBQUksd0JBQXdDLElBQUk7QUFFaEQsT0FBTyxTQUFTLG9CQUE4QjtJQUM1QyxJQUFJLDBCQUEwQixJQUFJLEVBQUU7UUFDbEMsSUFBSTtZQUNGLElBQUksU0FBUztZQUNiLHdCQUF3QixJQUFJO1FBQzlCLEVBQUUsT0FBTyxHQUFHO1lBQ1Ysd0JBQXdCLEtBQUs7UUFDL0I7SUFDRixDQUFDO0lBRUQsSUFBSSx1QkFBdUI7UUFDekIsT0FBTztJQUNULE9BQU87UUFDTCxPQUFPO0lBQ1QsQ0FBQztBQUNILENBQUM7QUFFRDs7OztDQUlDLEdBQ0QsT0FBTyxTQUFTLHdCQUF3QjtJQUN0Qyx3QkFBd0IsS0FBSztBQUMvQixDQUFDIn0=